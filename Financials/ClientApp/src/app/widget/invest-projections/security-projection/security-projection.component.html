<table class='table table-striped' aria-labelledby="tableLabel" *ngIf="investProjectionStock.investProjections">
  <thead>
    <tr>
      <th width="150px">Projection Type</th>
      <th width="100px"># Shares</th>
      <th width="100px">Cost</th>
      <th width="100px">Avg Share Cost</th>

      <th width="150px">Mkt Value</th>
      <th width="150px">Total Dividend</th>
      <th width="150px">Next # of Shares</th>
      <th width="150px">Next Pur Date</th>

    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let investProjection of investProjectionStock.investProjections">
      <td width="150px">{{ investProjection.projectionType }}</td>
      <td width="100px">{{ investProjection.GetTotalShares()| number: '1.1-2'}}</td>
      <!--numberOfShares-->
      <td width="100px">
        <button type="button" class="btn btn-primary" data-toggle="modal" [attr.data-target]="'#securityProjectModal' + investProjectionStock.securityRecord.symbol + investProjection.projectionTypeId">
          i
        </button>
        {{ investProjection.GetTotalPurchaseAmount() | number: '1.0-0'}}
        <!--Modal Purcahase Amount Details-->
        <app-yearly-breakdown [investProjectionStock]="investProjectionStock" [investProjection]="investProjection"></app-yearly-breakdown>

      </td>
      <td width="100px">{{ investProjection.GetAverageCost() | number: '1.1-2'}}</td>


      <td width="150px">
        {{ investProjection.GetTotalShares() * investProjectionStock.securityRecord.currentPrice | number: '1.1-2' }}
        (
        {{ ((( investProjectionStock.securityRecord.currentPrice - investProjection.GetAverageCost() ) / investProjection.GetAverageCost()) * 100) | number:'1.1-2'}}
        )
      </td>
      <td width="150px">{{ investProjection.GetTotalDividendProfit() | number:'1.1-2'}}</td>
      <td width="150px">

        <button type="button" class="btn btn-primary" data-toggle="modal" [attr.data-target]="'#purchaseDetailModal' + investProjectionStock.securityRecord.symbol + investProjection.projectionTypeId">
          i
        </button>
        
          {{ investProjection.getSharePurchaseRecommend() * investProjection.recommendCurrentPurchaseLevel | number:'1.1-2'}}
        

        <!-- Select a Security Modal -->
        <div class="modal fade" id="purchaseDetailModal{{investProjectionStock.securityRecord.symbol}}{{investProjection.projectionTypeId}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Purchase Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">



                <table class='table table-striped' aria-labelledby="tableLabel">
                  
                  <tbody>
                    <tr>
                      <td width="300px">Current Percentage Drop from High</td>
                      <td width="150px">{{investProjectionStock.getCurrentPercentageChange() | number:'1.1-2'}}</td>
                    </tr>

                    <tr>
                      <td width="300px">Projected Yearly Shares</td>
                      <td width="150px">{{ investProjection.recommendYearlyShare | number:'1.1-3'}}</td>
                    </tr>

                    <!--This is the current recommended current purchase level based on the investment projection type
  This should be multiplied by the getSharePurchaseRecommend when making a purchase
  -->
                    <tr>
                      <td width="300px">Recommended Purchase Level</td>
                      <td width="150px">{{ investProjection.recommendCurrentPurchaseLevel | number:'1.1-3'}}</td>
                    </tr>

                    <!--This is based on the shares that you should buy based on the highest frequency of share price level
  this is level 1 share price estimate so if the share price level is 5, you would be 5 times the amount listed here
  -->
                    <tr>
                      <td width="300px">Recommended Base Purchase Share</td>
                      <td width="150px">{{ investProjection.getSharePurchaseRecommend() | number:'1.1-3'}}</td>
                    </tr>

                  </tbody>
                </table>

             



                


              </div>
              <div class="modal-footer">
                <button type="button" #myModalClose class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>



      </td>
      <td width="150px">
        <span title="Last Purchase {{investProjection.lastPurchaseDate | date:'shortDate'}}">
          {{investProjection.nextDate | date:'shortDate'}}
        </span>

      </td>
    </tr>
  </tbody>
</table>

<!--This was the last current purchase share level made
{ { investProjection.currentPurchaseShares | number:'1.1-2'}}
(
This is the max number share purchase made during the timespan
{ { investProjection.maxNumberSharePurchase | number:'1.1-2'}}
)
  -->



